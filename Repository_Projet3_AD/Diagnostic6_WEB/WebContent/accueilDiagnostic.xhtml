<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<ui:composition template="/WEB-INF/Template5Diagnostic6.xhtml">

	<ui:define name="boutonDeconnexion">
 
		<h:form>
			<h:commandButton value="Deconnexion" styleClass="logoDeconnexion"
				action="#{mbUtilisateur.logout()}"
				image="images/iconeDeconnexion2.png" title="Deconnexion" />
		</h:form>
	</ui:define>

	<ui:define name="title">Diagnostic 6 - Consultation diagnostic</ui:define>

	<ui:define name="head">
		<link href="css/accueilProfessionnels.css" rel="stylesheet"
			type="text/css" />
	</ui:define>




	<ui:define name="accordeon1">
		Diagnostics avec des interventions en cours (#{mbArborescenceDiagnostic.listeDiagnosticsIntervEnCours.size()})
	</ui:define>

	<ui:define name="arborescence1">
		<h:form>
			<rich:tree id="tree1" nodeType="#{node.type}" var="node"
				value="#{mbArborescenceDiagnostic.rootNodes1}" toggleType="client"
				selectionType="ajax"
				selectionChangeListener="#{mbArborescenceDiagnostic.selectionChanged}">
				<rich:treeNode type="typeErp">
                    #{node.name}
                </rich:treeNode>
				<rich:treeNode type="erp">
                    #{node.name}
                </rich:treeNode>
				<rich:treeNode type="diagnostic">
					<h:commandLink action="consultationDiagnostic" value="#{node.intitule} - #{node.name} - #{node.idDiag}">
      					<f:param name="id" value="#{mbArborescenceDiagnostic.currentSelection.idDiag}" />
   					</h:commandLink>        
                </rich:treeNode>                
			</rich:tree>
		</h:form>
	</ui:define>

	<ui:define name="accordeon2">
		Diagnostics avec des interventions en attente (#{mbArborescenceDiagnostic.listeDiagnosticsIntervAttente.size()})
	</ui:define>

	<ui:define name="arborescence2">
		<h:form>
			<rich:tree id="tree2" nodeType="#{node.type}" var="node"
				value="#{mbArborescenceDiagnostic.rootNodes2}" toggleType="client"
				selectionType="ajax"
				selectionChangeListener="#{mbArborescenceDiagnostic.selectionChanged}">
				<rich:treeNode type="typeErp">
                    #{node.name}
                </rich:treeNode>
				<rich:treeNode type="erp">
                    #{node.name}
                </rich:treeNode>
				<rich:treeNode type="diagnostic">
					<h:commandLink action="consultationDiagnostic" value="#{node.intitule} - #{node.name} - #{node.idDiag}">
      					<f:param name="id" value="#{mbArborescenceDiagnostic.currentSelection.idDiag}" />
   					</h:commandLink>        
                </rich:treeNode>                
			</rich:tree>
		</h:form>
	</ui:define>

	<ui:define name="accordeon3">
		ERP archivés (#{mbArborescenceTravaux.listeERPIntervArchive.size()})
	</ui:define>

	<ui:define name="arborescence3">
		<h:form>
			<rich:tree id="tree3" nodeType="#{node.type}" var="node"
				value="#{mbArborescenceDiagnostic.rootNodes3}" toggleType="client"
				selectionType="ajax"
				selectionChangeListener="#{mbArborescenceDiagnostic.selectionChanged}">
				<rich:treeNode type="typeErp">
                    #{node.name}
                </rich:treeNode>
				<rich:treeNode type="erp">
                    #{node.name}
                </rich:treeNode>
				<rich:treeNode type="diagnostic">
					<h:commandLink action="consultationDiagnostic" value="#{node.intitule} - #{node.name} - #{node.idDiag}">
      					<f:param name="id" value="#{mbArborescenceDiagnostic.currentSelection.idDiag}" />
   					</h:commandLink>        
                </rich:treeNode>                
			</rich:tree>
		</h:form>
	</ui:define>


	<ui:define name="content">
		<div id="content">
			<span>Consultation des diagnostics enregistrés sur les ERP</span>
			<br/>
			<br/>
			<span class="italique">Sélectionnez un diagnostic dans le menu de gauche</span>		
		</div>
	</ui:define>

</ui:composition>
</html>
