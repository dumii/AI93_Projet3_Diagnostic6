<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>

	<link rel="stylesheet"
		href="//code.jquery.com/ui/1.11.4/themes/flick/jquery-ui.css" />
	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
</h:head>

<ui:composition template="/WEB-INF/Template3Diagnostic6.xhtml">
	<ui:define name="title">Diagnostic 6 - Profil</ui:define>
	<ui:define name="head">
		<link href="css/profil.css" rel="stylesheet" type="text/css" />
	</ui:define>


	<ui:define name="content">

		<f:view>

			<div id="content">
				<h:form id="toto">
					<f:event listener="#{mbConsultationERP.loadERP()}"
						type="preRenderView" />
					<h:panelGroup id="lblReponseAjax" layout="block">

						<div id="InfoErpDiagnostic">

							<h3>Profil Personnel</h3>

							<div class="formulaire">
								<h:outputLabel class="intitule" value="Nom : " />
								<h:outputLabel class="valeur"
									value="#{mbUtilisateur.utilisateur.nomUtilisateur}" />

								<h:outputLabel class="intitule" value="Prénom : " />
								<h:outputLabel class="valeur"
									value="#{mbUtilisateur.utilisateur.prenomUtilisateur}" />

								<h:outputLabel class="intitule" value="Téléphone : " />
								<h:inputText class="valeur"
									value="#{mbUtilisateur.utilisateur.telUtilisateur}" />

								<h:outputLabel class="intitule" value="Adresse mail : " />
								<h:inputText class="valeur"
									value="#{mbUtilisateur.utilisateur.emailUtilisateur}" />

							</div>

							<div class="formulaire">
								<h:outputLabel class="intitule" value="Enregistré depuis le : " />
								<h:outputLabel class="valeur"
									value="#{mbUtilisateur.utilisateur.dateEnregistrement}" />

								<h:outputLabel class="intitule" value="Login : " />
								<h:outputLabel class="valeur"
									value="#{mbUtilisateur.utilisateur.loginUtilisateur}" />

								<h:outputLabel class="intitule"
									value="Changer le mot de passe : " />
								<input type="password" class="valeur"
									value="#{mbUtilisateur.utilisateur.motDePasseUtilisateur}" />
							</div>

							<h:commandLink
								action="#{mbUtilisateur.modificationUtilisateur()}"
								value="Sauvegarder Modification" class="saveModif" />
						</div>

						<div id="InfoErpDiagnostic">

							<h3>Notifications</h3>

							<div class="formulaire2">
								<ui:repeat var="notif" value="#{mbNotifs.listeNotifs}">
									<h:panelGroup layout="block"
										rendered="#{mbNotifs.user.utilisateur.profilUtilisateur.idProfil==2}">
										<h:outputText
											value="L'intervention #{notif.intervention.idIntervention} est terminée" />
										<br />
										<h:commandLink value="Voir le chantier #{notif.erp.nomErp}"
											action="planningTravaux">
											<f:param name="id" value="#{notif.erp.idErp}"></f:param>
										</h:commandLink>
										
									</h:panelGroup>
										<br />
										<br />
									<h:panelGroup layout="block"
										rendered="#{mbNotifs.user.utilisateur.profilUtilisateur.idProfil==3}">
										<h:outputText value="Un nouveau diagnostic a été ajouté" />
										<br />
										<h:commandLink
											value="Voir le diagnostic : #{notif.diagnostic.intituleDiagnostic}"
											action="consultationDiagnostic">
											<f:param name="id" value="#{notif.diagnostic.idDiagnostic}"></f:param>
										</h:commandLink>
									</h:panelGroup>
								</ui:repeat>
							</div>
						</div>
					</h:panelGroup>
				</h:form>
			</div>
		</f:view>
	</ui:define>
</ui:composition>
</html>
