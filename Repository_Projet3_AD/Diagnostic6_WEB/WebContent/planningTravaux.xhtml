<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<ui:composition template="/WEB-INF/Template1Diagnostic6.xhtml">
	<ui:define name="title">Diagnostic 6 - Planing travaux</ui:define>
	
	<ui:define name="head">
		<link href="css/planningTravaux.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="JavaScript/planningTravaux.js"></script>
	</ui:define>
	
	<ui:define name="content">

		<div id="content">
		<h:form>
		<table id="monTableau">
			<tr id="idBidon" class="table-header1">
				<th colspan="11">Nom de l'ERP + Numéro de chantier</th>
			</tr>
			
			<tr id="idBidon" class="table-header2">
				<th class="NomIntervention"></th>
				<th class="Etat"></th>
				<th colspan="2">flèche?</th>
				<th colspan="2"></th>
				<th colspan="2">2015</th>
				<th colspan="2"></th>
				<th colspan="2"></th>
			</tr>
			
			<tr id="idBidon" class="table-header3">
				<th class="NomIntervention">Interventions</th>
				<th class="Etat">Etat</th>
				<th class="Temps" colspan="2">Mars + flèche?</th>
				<th class="Temps" colspan="2">Avril</th>
				<th class="Temps" colspan="2">Mai</th>
				<th class="Temps" colspan="2">Juin</th>
				<th class="Temps" colspan="2">Juillet + flèche?</th>
			</tr>
			
			<ui:repeat var="item" value="#{mbTestTravaux.listeTypes}">
				<tr id="T#{item.idTypeIntervention}" class="ligneBleueType">
					<td onClick="afficherCacher('T#{item.idTypeIntervention} -')">#{item.typeIntervention}</td>
					<td></td>
					<td colspan="10"></td>
				</tr>
				
				<ui:repeat var="intervention" value="#{item.listeInterventionTypeIntervention}">
					
					
					<tr id="T#{item.idTypeIntervention} - A#{intervention.anomalie.idAnomalie}" class="ligneBleueIntervention">
						<td>
							<span class="spanIntervention">Intervention #{intervention.idIntervention}</span>
						</td>
						
						<td>
							Etat
						</td>
						
						<td colspan="11" style="padding-right:4px">
							<div class="rectangle" id="#{intervention.idIntervention}">
								<span class="dateDebut">#{mbTestTravaux.shortFormater.format(
											 intervention.dateDebutIntervention)
											}
								</span>
								<span class="dateFin">#{mbTestTravaux.shortFormater.format(
											 intervention.dateFinIntervention)
											}
								</span>
							</div>
						</td>
					</tr>
					
					<tr id="T#{item.idTypeIntervention} - A#{intervention.anomalie.idAnomalie} - Description" class="ligneOrange">
						
							<td colspan="2">
								<h4>Informations sur l'intervention</h4>
								
								<h:outputLabel value="Etat d'avancement :" />
								
								<h:selectOneMenu value="#{intervention.etatAvancementTravaux.idEtatAvancement}">
									<f:selectItems value="#{intervention.listeEtatDisponibles}"
								   					var="var"
								  					itemLabel="#{var.intituleEtatAvancement}"
								  					itemValue="#{var.idEtatAvancement}"/>								
								</h:selectOneMenu>
		
								
								
								<h:outputLabel value="Date de début :" />
									<input type="text" 
											id="datepickerDebut - #{intervention.idIntervention}" 
											class="datepick"
											value="#{mbTestTravaux.formater.format(
											 intervention.dateDebutIntervention)
											}"
											disabled="disabled"/>
								
								<h:outputLabel value="Date de fin :" /> 
									<input type="text"
										   id="datepickerFin - #{intervention.idIntervention}"
										   value="#{mbTestTravaux.formater.format(
											 intervention.dateFinIntervention)
											}"
										   class="datepick"
										   disabled="disabled"/>
								
								<h:outputLabel value="Coût :" />
									<input type="number"
										   id="cout - #{intervention.idIntervention}"
										   step="1.00"
										   disabled="disabled"
										   value="#{intervention.coutIntervention}"/>	
								
								<input class="boutonModifier"
									   type="button"
									   id="boutonModifier - #{intervention.idIntervention}"
									   value="Modifier"
									   onClick="disabledEnabled('#{intervention.idIntervention}')"/>
								
								<input type="button" 
									   value="Valider les modifications" 
									   id="boutonValider - #{intervention.idIntervention}"
									   style="display:none"/>				
							</td>
							
							<td colspan="2">
								Ici on peut mettre l'état d'avancement des travaux sous la forme d'une icône				
							</td>
							
							<td colspan="2">
								Ici ce serais le type d'intervention ainsi que l'artisan sur l'intervention			
							</td>
							
							<td colspan="2">
								<h:outputLabel value="Description de l'anomalie :" />
								<p>#{intervention.anomalie.descriptionAnomalie}</p>			
							</td>
							
							<td colspan="2">
								<h:outputLabel value="Préconisation :" />
								<p>#{intervention.anomalie.preconisationAnomalie}</p>			
							</td>
							
							<td colspan="2">
								Et pour finir la localisation de l'anomalie dans l'erp			
							</td>
						
					</tr>
				</ui:repeat>

							
			</ui:repeat>
		
		</table>
			</h:form>
		</div>
		
	<script>
	jQuery.noConflict();
	
	jQuery('.datepick').each(function(){
		jQuery(this).datepicker();
	});
	
	jQuery('.rectangle').each(function(){
		dessinerRectangle(this);
	});

	jQuery('.ligneBleueIntervention').click(function(){
		jQuery(this).closest('tr').next().fadeToggle('medium');
	});
	
  </script>

	</ui:define>

</ui:composition>

</html>