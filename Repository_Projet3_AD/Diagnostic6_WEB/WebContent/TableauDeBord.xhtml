<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<h:head>

</h:head>
<body>
	<ui:composition template="/WEB-INF/Template3Diagnostic6.xhtml">

		<ui:define name="head">
			<link href="css/tableauDeBord.css" rel="stylesheet" type="text/css" />
		</ui:define>
		
		<ui:define name="content">
		<div id="content">
			<h:form>
				<a4j:outputPanel id="panel" layout="block">
					<a4j:repeat value="#{mbTableauDeBord.listeErpFiltree}" var="o"
						rows="20" id="repeat" styleClass="border-radius: 5px;">
						<rich:panel header="#{o.nomErp}"
							style="border-radius: 5px; position:relative;float:left; width:60%; padding:1px; background-color:#f7f7f7; border-display:none;margin-left: 14%;" styleClass="richpanel">
							<h:button clas="bouton" value="Planning" />
							<a4j:repeat value="#{o.listeDiagnosticErp}" var="d" rows="20"
								id="repeat" styleClass="height: 75px; border-radius: 5px;">
								<rich:panel
									style="height: 95px; margin-top: 3px; border-radius: 5px; background-color: #EFF2FB"
									id="repeater">
									<div class="logoTypeDiag">
										<h:panelGroup layout="block"
											rendered="#{d.typeDiagnostic.idTypeDiagnostic==1}">
											<img src="images/tableauDeBord/TypeAcces.75.71.png" alt=""
												id="iconeTypeDiag" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{d.typeDiagnostic.idTypeDiagnostic==2}">
											<img src="images/tableauDeBord/TypeEnergie.75.71.png" alt=""
												id="iconeTypeDiag" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{d.typeDiagnostic.idTypeDiagnostic==3}">
											<img src="images/tableauDeBord/TypeSecurite.75.75.png" alt=""
												id="iconeTypeDiag" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{d.typeDiagnostic.idTypeDiagnostic==4}">
											<img src="images/tableauDeBord/TypeHygiene.75.71.png" alt=""
												id="iconeTypeDiag" />
										</h:panelGroup>
									</div>
									<div class="intituleDiag">
										<h:outputText value="#{d.typeDiagnostic.nomType}"  />
									</div>
									<div class="nbInterDiag">
										<h:outputText
											value="#{mbTableauDeBord.calculAnomaliesParDiag(o, d)}" />
										<h:outputText value=" anomalies" />
										<br />
										<!-- <h:outputText
											value="#{mbTableauDeBord.calculInterventionsParDiag(d)}" />
										<h:outputText value=" interventions" /> -->
									</div>
									<div class="logoIndicateur">
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.calculerMoyenneParDiag(d) == 1}">
											<img
												src="images/tableauDeBord/Indicateur Vert 1 - 153.75.png"
												alt="" id="iconeIndicateur" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.niveauMoyen == 2}">
											<img
												src="images/tableauDeBord/Indicateur Jaune 2 - 153.75.png"
												alt="" id="iconeIndicateur" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.niveauMoyen == 3}">
											<img
												src="images/tableauDeBord/Indicateur Orange 3 - 152.75.png"
												alt="" id="iconeIndicateur" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.niveauMoyen == 4}">
											<img
												src="images/tableauDeBord/Indicateur Rouge 4 - 153.75.png"
												alt="" id="iconeIndicateur" />
										</h:panelGroup>
									</div>
									<div class="logoEtatAvancement">
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.calculEtatAvancement(d) == 1}">
											<img src="images/tableauDeBord/iconeValider5.png" alt=""
												id="iconeEtatAvancement" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.etatTmp == 2}">
											<img src="images/tableauDeBord/iconeSuspendue5.png" alt=""
												id="iconeEtatAvancement" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.etatTmp == 3}">
											<img src="images/tableauDeBord/iconeEnCours5.png" alt=""
												id="iconeEtatAvancement" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.etatTmp == 4}">
											<img src="images/tableauDeBord/iconeSuspendue5.png" alt=""
												id="iconeEtatAvancement" />
										</h:panelGroup>
										<h:panelGroup layout="block"
											rendered="#{mbTableauDeBord.etatTmp == 5}">
											<img src="images/tableauDeBord/iconeEnAttente5.png" alt=""
												id="iconeEtatAvancement" />
										</h:panelGroup>
									</div>
									<div class="boutonsActions">
										<div>
											<h:button class="bouton" value="Diagnostic" />
											<br />
											
										</div>
									</div>
								</rich:panel>

							</a4j:repeat>
							<h:panelGrid columns="2">

							</h:panelGrid>
						</rich:panel>
					</a4j:repeat>
				</a4j:outputPanel>

			</h:form>
			</div>
		</ui:define>
		
	</ui:composition>


</body>
</html>
