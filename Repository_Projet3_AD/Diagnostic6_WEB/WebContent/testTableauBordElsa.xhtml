<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<ui:composition template="/WEB-INF/Template1Diagnostic6.xhtml">
	<ui:define name="title">Diagnostic 6 - Test Elsa</ui:define>

	<ui:define name="head">
		<link href="css/tableauBordTest.css" rel="stylesheet" type="text/css" />
	</ui:define>
	
	<ui:define name="content">
		<div class="content">
		<h:form>
		</h:form>
		<f:view>
<h:form id="onTouchePas">
					<div class="filtres">
						<!-- SÃ©lection du type d'ERP -->
						<h:selectOneMenu value="#{mbTestTableauBord.idTypeSelectionne}">
							<f:selectItem itemLabel="-- Filtrer par type d'ERP --"
										  itemValue="0"/>
							<f:selectItems var="type" value="#{mbTestTableauBord.listeTypes}"
										  itemLabel="#{type.typeErpCourt}"
										  itemValue="#{type.idTypeErp}"/>
							<a4j:ajax event="change"
									  listener="#{mbTestTableauBord.filtresERP()}"
									  render="onTouchePas"/>
						</h:selectOneMenu>
					</div>				

					<ui:repeat var="erp" value="#{mbTestTableauBord.listeNetteAffichee}">
						<h3>#{erp.nomErp}</h3>
						<h:commandLink action="planningTravaux" class="btn" value="Consulter le planning">
      						<f:param name="id" value="#{erp.idErp}" />
   						</h:commandLink>
						<div class="monERP">
							
							
							<ui:repeat var="diagnostic" value="#{erp.listeDiagnosticErp}">
							
								<div class="diagnostic">
									<img class="typeDiagnostic" src="#{mbTestTableauBord.imageTypeDiagnostic(diagnostic.typeDiagnostic.idTypeDiagnostic)}" />
									<h:outputLabel class="libelle" value="#{diagnostic.typeDiagnostic.nomType}" />
									<h:outputLabel class="autres" value="#{diagnostic.listeAnomaliesDiagnostic.size()} anomalie(s)
									&lt;br /&gt; &lt;br /&gt; #{mbTestTableauBord.tableau[mbTestTableauBord.listeBrute.indexOf(erp)][erp.listeDiagnosticErp.indexOf(diagnostic)][2]} intervention(s)" 
									escape="false"/>
									
									<img class="indicateur" src="#{mbTestTableauBord.imageIndicateurMoyen(mbTestTableauBord.tableau[mbTestTableauBord.listeBrute.indexOf(erp)][erp.listeDiagnosticErp.indexOf(diagnostic)][0])}" />
									<img class="etatTravaux" src="#{mbTestTableauBord.imageEtatAvancement(mbTestTableauBord.tableau[mbTestTableauBord.listeBrute.indexOf(erp)][erp.listeDiagnosticErp.indexOf(diagnostic)][1])}" />
									
								</div>
							
							</ui:repeat>							
						</div>				
					</ui:repeat>
				</h:form>
			</f:view>
			</div>
	</ui:define>
</ui:composition>

</html>