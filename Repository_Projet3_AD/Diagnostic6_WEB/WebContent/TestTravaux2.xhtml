<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j">

<h:head></h:head> 
<body>
	<f:view>
		<h:form>
			<rich:calendar id="date" value="#{mbTestTravaux.dateChoisie}"></rich:calendar>
			<h:commandButton value="Ajouter une intervention" action="#{mbTestTravaux.ajouter()}" />
			
			<h:selectOneMenu value="#{mbTestTravaux.idEtat}">
					<f:selectItem itemLabel="-- Sélectionnez un état d'intervention --" itemValue="0"/>
					<f:selectItems value="#{mbTestTravaux.listeEtats}"
								   var="unType"
								   itemLabel="#{unType.intituleEtatAvancement}"
								   itemValue="#{unType.idEtatAvancement}"/>
			</h:selectOneMenu>
			
			<rich:dataTable var="intervention" id="maTable"
							value="#{mbTestTravaux.travaux}">					
				<rich:column>
					<f:facet name="header">ID</f:facet>
					#{intervention.idIntervention}
				</rich:column>
						
				<rich:column>
					<f:facet name="header">Coût d'intervention</f:facet>
					#{intervention.coutIntervention}
				</rich:column>
				<rich:column>
					<f:facet name="header">Type d'intervention</f:facet>
					#{intervention.typeIntervention.typeIntervention}
				</rich:column>
				<rich:column>
							<a4j:commandLink value="Modifier"
											 action="#{mbTestTravaux.modifier(intervention)}"
											 render="maTable">
							</a4j:commandLink>
				</rich:column>			
			</rich:dataTable>		
		</h:form>
	</f:view>
</body> 
</html>
